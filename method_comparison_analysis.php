<?php
/**
 * å¯¹æ¯”åˆ†æžä¸¤ä¸ªç‰ˆæœ¬çš„ tree ç±»æ–¹æ³•å·®å¼‚
 */

echo "=== Tree.class.php vs Tree11.class.php æ–¹æ³•å¯¹æ¯”åˆ†æž ===\n\n";

echo "ðŸ“‹ **æ–¹æ³•å¯¹æ¯”æ€»ç»“ï¼š**\n\n";

echo "1. **get_parent() æ–¹æ³•å¯¹æ¯”ï¼š**\n";
echo "   - âœ… **å®Œå…¨ä¸€è‡´** - ä¸¤ä¸ªç‰ˆæœ¬çš„é€»è¾‘å®Œå…¨ç›¸åŒ\n";
echo "   - éƒ½æ˜¯èŽ·å–æŒ‡å®šèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„åŒçº§èŠ‚ç‚¹\n";
echo "   - é€»è¾‘ï¼šmyid -> parentid -> parentid çš„ parentid -> æ‰¾åŒçº§\n\n";

echo "2. **get_child() æ–¹æ³•å¯¹æ¯”ï¼š**\n";
echo "   tree.class.php (ä¼˜åŒ–ç‰ˆ):\n";
echo "   - âœ… æ·»åŠ äº†ç¼“å­˜æœºåˆ¶ (_cache)\n";
echo "   - âœ… é€»è¾‘ç›¸åŒï¼šæ‰¾åˆ° parentid == myid çš„æ‰€æœ‰èŠ‚ç‚¹\n";
echo "   - âœ… è¿”å›žå€¼ç›¸åŒï¼šæœ‰ç»“æžœè¿”å›žæ•°ç»„ï¼Œæ— ç»“æžœè¿”å›ž false\n\n";
echo "   tree11.class.php (åŽŸç‰ˆ):\n";
echo "   - âŒ æ— ç¼“å­˜æœºåˆ¶\n";
echo "   - âœ… åŸºæœ¬é€»è¾‘ç›¸åŒ\n";
echo "   - âŒ æœ‰ä¸€ä¸ªæ½œåœ¨çš„å˜é‡è¦†ç›–é—®é¢˜ï¼š\$a åœ¨ foreach ä¸­è¢«é‡å¤ä½¿ç”¨\n\n";

echo "3. **å…³é”®å·®å¼‚åˆ†æžï¼š**\n\n";

echo "   **tree11.class.php ç¬¬73è¡Œçš„é—®é¢˜ï¼š**\n";
echo "   ```php\n";
echo "   foreach(\$this->arr as \$id => \$a){\n";
echo "       if(\$a['parentid'] == \$myid) \$newarr[\$id] = \$a;\n";
echo "   }\n";
echo "   ```\n";
echo "   è¿™é‡Œ \$a å˜é‡åœ¨å¾ªçŽ¯ä¸­è¢«æ­£ç¡®ä½¿ç”¨ï¼Œæ²¡æœ‰é—®é¢˜ã€‚\n\n";

echo "4. **å†…å­˜æº¢å‡ºçš„çœŸæ­£åŽŸå› ï¼š**\n\n";
echo "   ðŸš¨ **ä¸æ˜¯ get_parent æˆ– get_child æ–¹æ³•çš„é—®é¢˜ï¼**\n";
echo "   ðŸš¨ **é—®é¢˜åœ¨äºŽé€’å½’è°ƒç”¨å’Œæ•°æ®ç»“æž„ï¼**\n\n";

echo "   **åˆ†æžé€’å½’è°ƒç”¨ï¼š**\n";
echo "   ä¸¤ä¸ªç‰ˆæœ¬éƒ½åœ¨ç¬¬182è¡Œ(tree.class.php)å’Œç¬¬139è¡Œ(tree11.class.php)è¿›è¡Œé€’å½’ï¼š\n";
echo "   ```php\n";
echo "   \$this->get_tree(\$id, \$str, \$sid, \$adds.\$k.\$nbsp, \$str_group);\n";
echo "   ```\n\n";

echo "   **å†…å­˜æº¢å‡ºçš„æ ¹æœ¬åŽŸå› ï¼š**\n";
echo "   1. ðŸ“Š **æ•°æ®ä¸­å­˜åœ¨å¾ªçŽ¯å¼•ç”¨** - æŸä¸ªèŠ‚ç‚¹çš„ parentid æŒ‡å‘äº†å®ƒçš„å­èŠ‚ç‚¹\n";
echo "   2. ðŸ”„ **æ— é™é€’å½’** - get_tree() è°ƒç”¨è‡ªèº«æ—¶é™·å…¥æ­»å¾ªçŽ¯\n";
echo "   3. ðŸ’¾ **å†…å­˜ä¸æ–­å¢žé•¿** - æ¯æ¬¡é€’å½’éƒ½ä¼šåˆ›å»ºæ–°çš„æ ˆå¸§å’Œå˜é‡\n";
echo "   4. ðŸ’¥ **æœ€ç»ˆå†…å­˜è€—å°½** - è¾¾åˆ° PHP å†…å­˜é™åˆ¶\n\n";

echo "5. **ä¸ºä»€ä¹ˆ tree.class.php æ›´å®¹æ˜“å‡ºçŽ°é—®é¢˜ï¼š**\n\n";
echo "   è™½ç„¶é€»è¾‘ç›¸åŒï¼Œä½†ä¼˜åŒ–ç‰ˆæœ¬æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n";
echo "   - ðŸª **ç¼“å­˜æœºåˆ¶** - å¯èƒ½ç¼“å­˜äº†é”™è¯¯çš„å¾ªçŽ¯å¼•ç”¨ç»“æžœ\n";
echo "   - ðŸ“ˆ **æ›´å¤šçš„å†…å­˜ä½¿ç”¨** - ç¼“å­˜æ•°ç»„å ç”¨é¢å¤–å†…å­˜\n";
echo "   - ðŸ” **æ›´å¤æ‚çš„æ¨¡æ¿è§£æž** - parseTemplate æ–¹æ³•å¢žåŠ äº†å¤„ç†å¼€é”€\n\n";

echo "6. **è§£å†³æ–¹æ¡ˆå»ºè®®ï¼š**\n\n";
echo "   âœ… **æ•°æ®éªŒè¯** - æ£€æŸ¥æ•°æ®ä¸­æ˜¯å¦å­˜åœ¨å¾ªçŽ¯å¼•ç”¨\n";
echo "   âœ… **é€’å½’æ·±åº¦é™åˆ¶** - æ·»åŠ é€’å½’æ·±åº¦æ£€æµ‹\n";
echo "   âœ… **ç¼“å­˜æ¸…ç†** - åœ¨å‡ºçŽ°é—®é¢˜æ—¶æ¸…ç©ºç¼“å­˜\n";
echo "   âœ… **é”™è¯¯æ—¥å¿—** - è®°å½•é€’å½’å¼‚å¸¸æƒ…å†µ\n\n";

echo "7. **ç»“è®ºï¼š**\n";
echo "   ðŸ“Œ get_parent å’Œ get_child æ–¹æ³•åœ¨ä¸¤ä¸ªç‰ˆæœ¬ä¸­åŠŸèƒ½å®Œå…¨ä¸€è‡´\n";
echo "   ðŸ“Œ å†…å­˜æº¢å‡ºä¸æ˜¯ç”±è¿™ä¸¤ä¸ªæ–¹æ³•å¼•èµ·çš„\n";
echo "   ðŸ“Œ é—®é¢˜æ ¹æºæ˜¯æ•°æ®ç»“æž„ä¸­çš„å¾ªçŽ¯å¼•ç”¨å¯¼è‡´ get_tree æ— é™é€’å½’\n";
echo "   ðŸ“Œ éœ€è¦åœ¨æ•°æ®å±‚é¢è§£å†³å¾ªçŽ¯å¼•ç”¨é—®é¢˜ï¼Œæˆ–æ·»åŠ é€’å½’ä¿æŠ¤æœºåˆ¶\n\n";

// æ£€æŸ¥å½“å‰æ•°æ®æ˜¯å¦æœ‰å¾ªçŽ¯å¼•ç”¨çš„ç¤ºä¾‹ä»£ç 
echo "ðŸ”§ **æ•°æ®æ£€æŸ¥ç¤ºä¾‹ä»£ç ï¼š**\n";
echo "```php\n";
echo "// æ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰å¾ªçŽ¯å¼•ç”¨\n";
echo "function checkCircularReference(\$data) {\n";
echo "    foreach(\$data as \$item) {\n";
echo "        \$visited = array();\n";
echo "        \$current_id = \$item['id'];\n";
echo "        while(\$current_id != 0) {\n";
echo "            if(in_array(\$current_id, \$visited)) {\n";
echo "                return true; // å‘çŽ°å¾ªçŽ¯å¼•ç”¨\n";
echo "            }\n";
echo "            \$visited[] = \$current_id;\n";
echo "            // æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹...\n";
echo "        }\n";
echo "    }\n";
echo "    return false;\n";
echo "}\n";
echo "```\n";
?>
